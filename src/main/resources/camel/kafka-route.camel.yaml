- route:
    id: customer-change-event-route
    from:
      uri: kafka:{{app.input-topic-name}}
      parameters:
        topicIsPattern: true
      steps:
        - filter:
            steps:
              - log:
                  message: "- Recieve Topic Message : ${body}"
              - unmarshal:
                  id: unmarshal-Json-to-Object
                  json:
                    unmarshalType: com.redhat.example.entity.KijitsuNyukinRequestEntity
              - process:
                  id: process-CardCheck
                  description: card number check
                  ref: "#class:com.redhat.example.processor.CardCheckProcessor"
              - log:
                  message: "- Exchange Message  : ${body}"
              - process:
                  id: process-Set-Deposit-Result-Message
                  description: set deposit result message
                  ref: "#class:com.redhat.example.processor.SetDepositResultMessageProcessor"
              - marshal:
                  description: marshal-Object-to-Json
                  json: {}
              - to:
                  id: to-Kafka
                  uri: kafka:{{app.output-topic-name}}
                  parameters: {}
            simple: ${body} != null
